(this["webpackJsonpvk-app-edition-story"]=this["webpackJsonpvk-app-edition-story"]||[]).push([[0],{153:function(e,t,a){e.exports=a(262)},262:function(e,t,a){"use strict";a.r(t);a(154),a(180),a(182),a(183),a(185),a(186),a(187),a(188),a(189),a(190),a(191),a(192),a(194),a(195),a(196),a(197),a(198),a(199),a(200),a(201),a(202),a(203),a(205),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222);var n=a(0),o=a.n(n),r=a(59),l=a.n(r),c=a(34),s=a.n(c),i=a(35),m=a(21),u=a(98),d=a(99),f=a(124),_=a(123),g=a(39),p=a.n(g),h=(a(231),a(61)),E=a.n(h),y=a(100),v=a.n(y),S=a(101),w=a.n(S),C=a(102),b=a.n(C),k=a(103),j=a.n(k),O=(a(232),a(104)),x=a.n(O),z=a(105),N=a.n(z),J=a(106),M=a.n(J),P=a(107),T=a.n(P),I=(a(233),a(108)),V=a(2),q=(a(244),a(22)),A=a.n(q),B={borderRadius:"30%",borderColor:"black"},K=function(e){var t=e.answer,a=e.next,n=e.go;return o.a.createElement(V.e,{size:"l"},o.a.createElement("div",{style:B},o.a.createElement(V.g,{onClick:n,asideContent:o.a.createElement(V.j,{mode:null==a||0==a?"prominent":"primary"},null==a||0==a?"!":a),multiline:!0,style:{textAlign:"left"}},t)))},H=new I.VKMiniAppAPI,R=Object(V.P)(),F="https://api-bot-php.000webhostapp.com/api/",D="https://api-bot-php.000webhostapp.com/",L=function(e){Object(f.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).get_my_projects=function(){n.setState({load:!0}),A.a.post(F,JSON.stringify({url:window.location.href,event:"get_my_create_projects",offset:n.state.offse_my_projects})).then((function(e){console.log(e),n.setState({create_story:{bool:e.data.bool,data:n.state.create_story.data.concat(e.data.data)},load:!1}),0!==e.data.data.length&&n.setState({offse_my_projects:n.state.offse_my_projects+1})}))},n.onChange=function(e){var t=e.currentTarget,a=t.name,o=t.value;n.setState({form:Object(m.a)({},n.state.form,Object(i.a)({},a,o))})},n.create_story=function(e){n.setState({popout:o.a.createElement(V.E,null)}),A.a.post(F,JSON.stringify(Object(m.a)({event:"create_project"},n.state.form,{url:window.location.href}))).then((function(e){console.log(e),n.state.create_story.data.push(Object(m.a)({},n.state.form,{project_id:e.data})),n.setState({activeModal:null,popout:null,form:{name:"",description:"",fandom:null,count:0,answer_1:"",answer_2:"",answer_3:""}})}))},n.create_route=function(e){n.setState({popout:o.a.createElement(V.E,null)});var t,a=n.state.form;t=null==a.img?0:1;var r={text:a.text,img:t};a.count>=1&&(r.answer_1=a.answer_1),a.count>=2&&(r.answer_2=a.answer_2),a.count>=3&&(r.answer_3=a.answer_3),r.project_id=n.state.project_id,r.count=a.count,A.a.post(F,JSON.stringify(Object(m.a)({event:"create_route",url:window.location.href},a,{project_id:n.state.project_id}))).then((function(e){console.log(e),r.id=e.data,n.state.tree_story.data.unshift(r),n.setState({popout:null,activePanel:"tree_story",form:{name:"",description:"",fandom:null,count:0,answer_1:"",answer_2:"",answer_3:""}})})),console.log(n.state.tree_story)},n.setNext=function(e){var t;n.setState({popout:o.a.createElement(V.E,null)});for(var a=0;a<n.state.tree_story.data.length;a++)if(n.state.tree_story.data[a].id==n.state.current_route){t=a;break}A.a.post(F,JSON.stringify({event:"setNext",url:window.location.href,project_id:n.state.project_id,id:n.state.current_route,next_route:e,next:n.state.current_next})).then((function(a){console.log(a);var o=n.state.tree_story.data[t];switch(console.log(o),n.state.current_next){case 1:o.next_1=e;break;case 2:o.next_2=e;break;case 3:o.next_3=e}n.state.tree_story.data.splice(t,1,o),n.setState({activeView:"main",popout:null})}))},n.loadImage=function(e){var t=new FileReader,a=document.getElementById(e).files[0];console.log(a),"undefined"!=typeof a?(console.log(a.type),"image/png"==a.type||"image/jpeg"==a.type?(t.readAsDataURL(a),t.onload=function(){n.setState({form:Object(m.a)({},n.state.form,{img:t.result})})}):n.setState({snackbar:o.a.createElement(V.J,{onClose:function(){return n.setState({snackbar:null})}},"\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b \u0442\u0438\u043f  \u0444\u0430\u0439\u043b\u0430")})):n.setState({snackbar:o.a.createElement(V.J,{onClose:function(){return n.setState({snackbar:null})}},"\u0412\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u0444\u0430\u0439\u043b")})},n.loadImageEditor=function(){var e=new FileReader,t=document.getElementById("image_editor").files[0];"undefined"!=typeof t&&(e.readAsDataURL(t),e.onload=function(){n.setState({form_edit:Object(m.a)({},n.state.form_edit,{img:1,new_img:e.result})})})},n.loadImageEditStory=function(){var e=new FileReader,t=document.getElementById("image_edit_story").files[0];console.log(t),"undefined"!=typeof t?(console.log(t.type),"image/png"==t.type||"image/jpeg"==t.type?(e.readAsDataURL(t),e.onload=function(){n.setState({form_edit:Object(m.a)({},n.state.form_edit,{img:e.result})})}):n.setState({snackbar:o.a.createElement(V.J,{onClose:function(){return n.setState({snackbar:null})}},"\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b \u0442\u0438\u043f  \u0444\u0430\u0439\u043b\u0430")})):n.setState({snackbar:o.a.createElement(V.J,{onClose:function(){return n.setState({snackbar:null})}},"\u0412\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u0444\u0430\u0439\u043b")})},n.load=function(e,t){n.setState({activePanel:"tree_story"}),A.a.post(F,JSON.stringify({event:"get_routes",project_id:e,url:window.location.href,offset:0})).then((function(a){console.log(a),n.setState({project_id:e,tree_story:a.data,watch:t,offset_tree:1})}))},n.get_fandoms=function(e){A.a.post(F,JSON.stringify({event:"search",page:n.state.page,q:n.state.q,url:window.location.href})).then((function(e){console.log(e),0==n.state.page?n.setState({fandoms:e.data,page:1}):n.setState({fandoms:{more:e.data.more,data:n.state.fandoms.data.concat(e.data.data)},page:n.state.page+1})}))},n.loadOffset=function(){n.setState({load:!0}),A.a.post(F,JSON.stringify({event:"get_routes",project_id:n.state.project_id,url:window.location.href,offset:n.state.offset_tree})).then((function(e){console.log(e),n.setState({load:!1}),e.data.data.length>0&&n.setState({offset_tree:n.state.offset_tree+1,tree_story:{bool:e.data.bool,data:n.state.tree_story.data.concat(e.data.data)}})}))},n.onSet=function(e){var t=e.currentTarget,a=t.name,o=t.value;n.setState({form_edit:Object(m.a)({},n.state.form_edit,Object(i.a)({},a,o))})},n.save_edit_route=function(e){var t;n.setState({popout:o.a.createElement(V.E,null)});for(var a=0;a<n.state.tree_story.data.length;a++)if(n.state.tree_story.data[a].id==n.state.form_edit.id){t=a;break}A.a.post(F,JSON.stringify(Object(m.a)({event:"set_route"},n.state.form_edit,{url:window.location.href}))).then((function(e){console.log(e),n.state.tree_story.data.splice(t,1,n.state.form_edit),n.setState({activePanel:"tree_story",popout:null})}))},n.delete_route=function(){var e;n.setState({popout:o.a.createElement(V.E,null)});for(var t=0;t<n.state.tree_story.data.length;t++)if(n.state.tree_story[t].data.id==n.state.form_edit.id){e=t;break}A.a.post(F,JSON.stringify(Object(m.a)({event:"delete_route"},n.state.form_edit,{url:window.location.href}))).then((function(t){console.log(t),n.state.tree_story.data.splice(e,1),n.setState({activeModal:null,popout:null})}))},n.delete_project=function(){var e;n.setState({popout:o.a.createElement(V.E,null)});for(var t=0;t<n.state.create_story.data.length;t++)if(n.state.create_story.data[t].project_id==n.state.project_id){e=t;break}A.a.post(F,JSON.stringify({event:"delete_project",url:window.location.href,project_id:n.state.project_id})).then((function(t){console.log(t),n.state.create_story.data.splice(e,1),n.setState({activePanel:"main",project_id:null,popout:null})}))},n.onChangeSearch=function(e){var t=e.currentTarget,a=t.name,o=t.value;n.setState(Object(i.a)({},a,o)),A.a.post(F,JSON.stringify({event:"search",q:o,page:0,url:window.location.href})).then((function(e){console.log(e),n.setState({fandoms:e.data,page:1,q:o})}))},n.onChangeSearchProject=function(e){n.setState({string:e.currentTarget.value}),A.a.post(F,JSON.stringify({event:"get_projects_search",type:n.state.filter_type,fandom:n.state.form.fandom,q:e.currentTarget.value,offset:0,url:window.location.href})).then((function(e){console.log(e),n.setState({all_story:e.data,offset_all_story:1})}))},n.get_search_by_filter=function(){A.a.post(F,JSON.stringify({event:"get_projects_search",type:n.state.filter_type,fandom:n.state.form.fandom,q:n.state.string,url:window.location.href,offset:0})).then((function(e){console.log(e),n.setState({all_story:e.data,offset_all_story:1,activeModal:null})}))},n.get_more_story=function(){A.a.post(F,JSON.stringify({event:"get_projects_search",type:n.state.filter_type,fandom:n.state.form.fandom,q:n.state.string,url:window.location.href,offset:n.state.offset_all_story})).then((function(e){console.log(e),0!=e.data.data.length&&n.setState({all_story:{more:e.data.more,data:n.state.all_story.data.concat(e.data.data)},offset_all_story:n.state.offset_all_story+1})}))},n.set_view=function(e){for(var t,a=0;a<n.state.create_story.data.length;a++)if(n.state.create_story.data[a].project_id==n.state.project_id){t=a;break}var r=n.state.create_story.data[t];n.setState({popout:o.a.createElement(V.E,null)}),A.a.post(F,JSON.stringify({event:"set_view",project_id:n.state.project_id,url:window.location.href,view:e})).then((function(e){console.log(e),r.watch=e.data,n.state.create_story.data.splice(t,1,r),n.setState({watch:e.data,popout:null})}))},n.go_menu=function(){n.setState({popout:o.a.createElement(V.a,{onClose:function(){return n.setState({popout:null})}},o.a.createElement(V.b,{autoclose:!0,onClick:n.pre_edit_story},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),1==n.state.watch?o.a.createElement(V.b,{autoclose:!0,before:o.a.createElement(M.a,null),onClick:function(){return n.set_view(0)}},"\u0421\u043a\u0440\u044b\u0442\u044c \u0438\u0437 \u043e\u0431\u0449\u0435\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430"):o.a.createElement(V.b,{autoclose:!0,before:o.a.createElement(T.a,null),onClick:function(){return n.set_view(1)}},"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u043e\u0431\u0449\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u0435"),o.a.createElement(V.b,{autoclose:!0,before:o.a.createElement(w.a,null),onClick:n.delete_project},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),R===V.r&&o.a.createElement(V.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"))})},n.goTo=function(e){H.getUserInfo().then((function(t){H.allowCommunityMessages(123568924).then((function(){H.sendPayloadToCommunity(123568924,{command:"input_story",project_id:e,user_id:t.id})}))}))},n.on=function(e){var t,a=e.currentTarget,o=a.name,r=a.value;n.setState((t={},Object(i.a)(t,o,r),Object(i.a)(t,"offset_all_story",0),t))},n.pre_edit_story=function(){for(var e,t=0;t<n.state.create_story.data.length;t++)if(n.state.create_story.data[t].project_id==n.state.project_id){e=t;break}n.setState({form_edit:n.state.create_story.data[e],form:Object(m.a)({},n.state.form,{fandom:n.state.create_story.data[e].fandom}),activeModal:"edit_story"})},n.save_story=function(){var e;n.setState({popout:o.a.createElement(V.E,null)});for(var t=0;t<n.state.create_story.data.length;t++)if(n.state.create_story.data[t].project_id==n.state.project_id){e=t;break}var a=n.state.form_edit;a.fandom=n.state.form.fandom,A.a.post(F,JSON.stringify(Object(m.a)({event:"set_project"},a,{url:window.location.href}))).then((function(t){n.state.create_story.data.splice(e,1,a),n.setState({activeModal:null,popout:null})}))},n.check_lenght_answer=function(){var e=!0,t=n.state.form,a=t.answer_1,o=t.answer_2,r=t.answer_3;switch(t.count){case 0:e=!1;break;case 1:null!==a&&""!==a&&a.length<40&&(e=!1);break;case 2:null!==a&&""!==a&&null!==o&&""!==o&&a.length<40&&o.length<40&&(e=!1);break;case 3:null!==a&&""!==a&&null!==o&&""!==o&&null!==r&&""!==r&&a.length<40&&o.length<40&&r.length<40&&(e=!1)}return console.log(e),e},n.state={theme:"bright_light",activeView:"main",activePanel:"main",activeTab:"user",snackbar:null,create_story:null,all_story:null,tree_story:null,watch:0,load:!1,page:0,q:"",offset_all_story:0,offse_my_projects:0,offset_tree:0,fandoms:null,form:{name:"",description:"",fandom:null,count:0,answer_1:"",answer_2:"",answer_3:""},form_edit:{},filter_type:"",string:"",current_route:null,current_next:null,settings:{}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;A.a.post(F,JSON.stringify({url:window.location.href,event:"get_my_create_projects",offset:this.state.offse_my_projects})).then((function(t){console.log(t),e.setState({create_story:t.data})})),A.a.post(F,JSON.stringify({event:"get_projects_search",url:window.location.href,page:0,q:""})).then((function(t){console.log(t),e.setState({all_story:t.data,offset_all_story:1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.activePanel,n=t.activeTab,r=t.activeModal,l=t.activeView,c=t.form,s=t.form_edit;return o.a.createElement(V.i,{isWebView:!0,scheme:this.state.theme},o.a.createElement(V.D,{activeView:l},o.a.createElement(V.O,{id:"main",activePanel:a,popout:this.state.popout,header:!1,modal:o.a.createElement(V.x,{activeModal:r},o.a.createElement(V.v,{id:"create_story",header:o.a.createElement(V.w,{right:o.a.createElement(V.k,null,o.a.createElement(p.a,{onClick:function(){return e.setState({activeModal:null})}}))},"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u0439"),onClose:function(){return e.setState({activeModal:null})},dynamicContentHeight:!0,settlingHeight:100},o.a.createElement(V.m,null,o.a.createElement(V.n,{top:"\u0424\u043e\u0442\u043e",align:"center"},null==c.img?null:o.a.createElement(V.c,{src:c.img,size:72,mode:"image"}),o.a.createElement(V.l,{id:"image_story",mode:"outline",onChange:function(){return e.loadImage("image_story")},accept:"image/jpeg,image/png"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e")),o.a.createElement(V.n,{top:"\u041d\u0430\u0437\u0430\u0432\u0430\u043d\u0438\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"},o.a.createElement(V.s,{name:"name",onChange:this.onChange,value:c.name})),o.a.createElement(V.n,{top:"\u0424\u0430\u043d\u0434\u043e\u043c"},o.a.createElement(V.H,{onClick:function(){e.setState({activeView:"fandom"}),e.get_fandoms(0)},placeholder:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"},c.fandom)),o.a.createElement(V.n,{top:"\u0422\u0438\u043f"},o.a.createElement(V.G,{name:"type",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0442\u0438\u043f",onChange:this.onChange,value:c.type},o.a.createElement("option",{value:"book",onChange:this.onChange},"\u041f\u043e \u043a\u043d\u0438\u0433\u0435"),o.a.createElement("option",{value:"film",onChange:this.onChange},"\u041f\u043e \u0444\u0438\u043b\u044c\u043c\u0443"),o.a.createElement("option",{value:"play",onChange:this.onChange},"\u041f\u043e \u0438\u0433\u0440\u0435"),o.a.createElement("option",{value:"other",onChange:this.onChange},"\u0414\u0440\u0443\u0433\u043e\u0435"))),o.a.createElement(V.n,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},o.a.createElement(V.N,{name:"description",onChange:this.onChange,value:c.description})),o.a.createElement(V.d,{size:"xl",onClick:this.create_story,disabled:""==c.name||null==c.type},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c!"))),o.a.createElement(V.v,{id:"edit_story",header:o.a.createElement(V.w,{right:o.a.createElement(V.k,null,o.a.createElement(p.a,{onClick:function(){return e.setState({activeModal:null})}}))},"\u0420\u0435\u0434\u043e\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),onClose:function(){return e.setState({activeModal:null})},dynamicContentHeight:!0,settlingHeight:100},o.a.createElement(V.m,null,o.a.createElement(V.n,{top:"\u0424\u043e\u0442\u043e",align:"center"},null==s.img?null:o.a.createElement("div",null,o.a.createElement(V.c,{src:s.img,size:72,mode:"image"}),o.a.createElement(V.d,{mode:"destructive",style:{margin:5},onClick:function(){return e.setState({form_edit:Object(m.a)({},s,{img:null})})}},o.a.createElement(p.a,null))),o.a.createElement(V.l,{id:"image_edit_story",mode:"outline",onChange:this.loadImageEditStory,accept:"image/jpeg,image/png"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e")),o.a.createElement(V.n,{top:"\u041d\u0430\u0437\u0430\u0432\u0430\u043d\u0438\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"},o.a.createElement(V.s,{name:"name",onChange:this.onSet,value:s.name})),o.a.createElement(V.n,{top:"\u0424\u0430\u043d\u0434\u043e\u043c"},o.a.createElement(V.H,{onClick:function(){e.setState({activeView:"fandom"}),e.get_fandoms(0)},placeholder:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"},c.fandom)),o.a.createElement(V.n,{top:"\u0422\u0438\u043f"},o.a.createElement(V.G,{name:"type",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0442\u0438\u043f",onChange:this.onSet,value:s.type},o.a.createElement("option",{value:"book",onChange:this.onSet},"\u041f\u043e \u043a\u043d\u0438\u0433\u0435"),o.a.createElement("option",{value:"film",onChange:this.onSet},"\u041f\u043e \u0444\u0438\u043b\u044c\u043c\u0443"),o.a.createElement("option",{value:"play",onChange:this.onSet},"\u041f\u043e \u0438\u0433\u0440\u0435"),o.a.createElement("option",{value:"other",onChange:this.onSet},"\u0414\u0440\u0443\u0433\u043e\u0435"))),o.a.createElement(V.n,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},o.a.createElement(V.N,{name:"description",onChange:this.onSet,value:s.description})),o.a.createElement(V.d,{onClick:this.save_story,size:"xl"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))),o.a.createElement(V.v,{id:"filtres",header:o.a.createElement(V.w,{left:R!=V.r&&o.a.createElement(V.A,{onClick:function(){return e.setState({activeModal:null})}},o.a.createElement(p.a,null)),right:o.a.createElement(V.A,{onClick:this.get_search_by_filter},R==V.r?"\u0413\u043e\u0442\u043e\u0432\u043e":o.a.createElement(E.a,null))},"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"),onClose:function(){return e.setState({activeModal:null})}},o.a.createElement(V.m,null,o.a.createElement(V.n,{top:"\u0424\u0430\u043d\u0434\u043e\u043c"},o.a.createElement(V.H,{onClick:function(){e.setState({activeView:"fandom"}),e.get_fandoms(0)},placeholder:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"},c.fandom)),o.a.createElement(V.n,{top:"\u0422\u0438\u043f"},o.a.createElement(V.G,{name:"filter_type",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0442\u0438\u043f",onChange:this.on,value:this.state.filter_type},o.a.createElement("option",{value:"book",onChange:this.on},"\u041f\u043e \u043a\u043d\u0438\u0433\u0435"),o.a.createElement("option",{value:"film",onChange:this.on},"\u041f\u043e \u0444\u0438\u043b\u044c\u043c\u0443"),o.a.createElement("option",{value:"play",onChange:this.on},"\u041f\u043e \u0438\u0433\u0440\u0435"),o.a.createElement("option",{value:"other",onChange:this.on},"\u0414\u0440\u0443\u0433\u043e\u0435"))),o.a.createElement(V.d,{onClick:function(){return e.setState({filter_type:"",form:Object(m.a)({},c,{fandom:""}),offset_all_story:0})},mode:"destructive",size:"xl"},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"))))},o.a.createElement(V.y,{id:"main"},"creator"===n?o.a.createElement(V.B,{left:o.a.createElement(V.A,{onClick:function(){return e.setState({activeModal:"create_story"})}},o.a.createElement(b.a,null))},"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0439"):o.a.createElement(V.B,null,"\u0418\u0441\u0442\u043e\u0440\u0438\u0438 \u0432 \u0412\u041a"),o.a.createElement(V.L,null,o.a.createElement(V.M,{selected:"user"===n,onClick:function(){return e.setState({activeTab:"user"})}},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"),o.a.createElement(V.M,{selected:"creator"===n,onClick:function(){return e.setState({activeTab:"creator"})}},"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c")),"creator"===n?o.a.createElement(V.k,null,null==this.state.create_story?o.a.createElement(V.K,{size:"large",style:{color:"var(--accent)",marginTop:"40%"}}):o.a.createElement("div",null,0==this.state.create_story.data.length?o.a.createElement(V.C,{header:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442",action:o.a.createElement(V.d,{size:"l",onClick:function(){return e.setState({activeModal:"create_story"})}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e")},"\u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0441\u0442\u043e\u0440\u0438\u0439"):o.a.createElement("div",null,o.a.createElement(V.u,null,this.state.create_story.data.map((function(t){return o.a.createElement(V.g,{key:t.story_id,before:o.a.createElement(V.c,{src:t.img,type:"image"}),onClick:function(){return e.load(t.project_id,t.watch)},asideContent:"\u2116"+t.project_id},t.name)}))),this.state.create_story.more?o.a.createElement(V.d,{size:"xl",onClick:this.get_my_projects},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"):null))):o.a.createElement("div",null,null==this.state.all_story?o.a.createElement(V.K,{size:"large",style:{color:"var(--accent)",marginTop:"40%"}}):o.a.createElement("div",null,o.a.createElement(V.f,null,o.a.createElement(V.F,{icon:o.a.createElement(N.a,null),onChange:this.onChangeSearchProject,value:this.state.string,onIconClick:function(){return e.setState({activeModal:"filtres"})}}),this.state.all_story.data.map((function(t){return o.a.createElement(V.e,{size:"l"},o.a.createElement("div",{align:"center"},o.a.createElement(V.q,{aside:o.a.createElement(V.j,{mode:"secondary"},t.project_id)}),o.a.createElement(V.c,{src:t.img,size:100,style:{marginTop:10},mode:"image"}),o.a.createElement("h1",{style:{fontSize:30,fontWeight:"bold",margin:15}},t.name),o.a.createElement("span",{style:{padding:10}},t.description),o.a.createElement("br",null),o.a.createElement(V.k,{style:{padding:5}},o.a.createElement(V.c,{src:t.photo_200}),o.a.createElement(V.t,{href:t.url},t.user)),o.a.createElement(V.k,null,o.a.createElement(V.d,{size:"l",mode:"outline",onClick:function(){return e.goTo(t.project_id)},href:"https://vk.com/im?sel=-123568924"},"\u041d\u0430\u0447\u0430\u0442\u044c"))))}))),this.state.all_story.more?o.a.createElement(V.k,null,o.a.createElement(V.d,{size:"xl",onClick:this.get_more_story,style:{marginTop:5}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435")):null)),this.state.snackbar),o.a.createElement(V.y,{id:"tree_story"},o.a.createElement(V.B,{left:o.a.createElement(o.a.Fragment,null,o.a.createElement(V.z,{onClick:function(){return e.setState({activePanel:"main",tree_story:null,offset_tree:0})}}),o.a.createElement(V.A,{onClick:this.go_menu},o.a.createElement(j.a,null)))},"\u0414\u0435\u0440\u0435\u0432\u043e \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),null==this.state.tree_story?o.a.createElement(V.K,{size:"large",style:{color:"var(--accent)",marginTop:"40%"}}):o.a.createElement(V.k,null,0==this.state.tree_story.data.length?o.a.createElement(V.C,{header:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435",action:o.a.createElement(V.d,{size:"l",onClick:function(){return e.setState({activePanel:"create_route"})},mode:"commerce"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0439 \u0440\u043e\u0443\u0442")},"\u0441 \u0447\u0438\u0441\u0442\u043e\u0433\u043e \u043b\u0438\u0441\u0442\u0430"):o.a.createElement("div",null,o.a.createElement(V.h,{onClick:function(){return e.setState({activePanel:"create_route"})},before:o.a.createElement(v.a,null),align:"center"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),o.a.createElement(V.f,null,o.a.createElement("div",null,this.state.tree_story.data.map((function(t,a){return o.a.createElement(V.e,{size:"l"},o.a.createElement("div",{align:"center"},o.a.createElement(V.q,{aside:o.a.createElement(x.a,{style:{top:5},onClick:function(){return e.setState({form_edit:e.state.tree_story.data[a],activePanel:"edit_route"})}})},"route_id: "+t.id),1==t.img?o.a.createElement(V.c,{src:D+t.project_id+"_"+t.id+".png",mode:"image"}):null,o.a.createElement("p",{style:{textAlign:"center",fontSize:20,padding:10,margin:0,fontWeight:"bold"}},t.text),t.count>=1?o.a.createElement(K,{answer:t.answer_1,next:t.next_1,go:function(){return e.setState({activeView:"routes",current_route:t.id,current_next:1})}}):null,t.count>=2?o.a.createElement(K,{answer:t.answer_2,next:t.next_2,go:function(){return e.setState({activeView:"routes",current_route:t.id,current_next:2})}}):null,t.count>=3?o.a.createElement(K,{answer:t.answer_3,next:t.next_3,go:function(){return e.setState({activeView:"routes",current_route:t.id,current_next:3})}}):null))})))),this.state.tree_story.more?o.a.createElement(V.k,null,o.a.createElement(V.d,{size:"xl",onClick:this.loadOffset},this.state.load?o.a.createElement(V.K,null):"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435")):null)),this.state.snackbar),o.a.createElement(V.y,{id:"create_route"},o.a.createElement(V.B,{left:o.a.createElement(V.z,{onClick:function(){return e.setState({activePanel:"tree_story"})}})},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 route"),o.a.createElement(V.m,null,this.check_lenght_answer()?o.a.createElement(V.o,{mode:"error",header:"\u041d\u0435\u043a\u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043e\u0442\u0432\u0435\u0442\u0430"},"\u041e\u0442\u0432\u0435\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c \u0438\u043b\u0438 \u0434\u043b\u0438\u043d\u043d\u0435\u0435 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):null,o.a.createElement(V.n,{top:"\u0424\u043e\u0442\u043e",align:"center"},null==c.img?null:o.a.createElement("div",null,o.a.createElement(V.c,{src:c.img,size:72,mode:"image"}),o.a.createElement(V.d,{mode:"destructive",style:{margin:5},onClick:function(){return e.setState({form:Object(m.a)({},c,{img:null})})}},o.a.createElement(p.a,null))),o.a.createElement(V.l,{id:"image_route",accept:"image/jpeg,image/png",mode:"outline",onChange:function(){return e.loadImage("image_route")}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e")),o.a.createElement(V.n,{top:"\u0422\u0435\u043a\u0441\u0442"},o.a.createElement(V.N,{name:"text",onChange:this.onChange})),o.a.createElement(V.I,{step:1,max:3,min:0,onChange:function(t){return e.setState({form:Object(m.a)({},e.state.form,{count:t})})},bottom:c.count}),o.a.createElement(V.n,{top:"\u041e\u0442\u0432\u0435\u0442\u044b"},c.count>=1?o.a.createElement(V.s,{name:"answer_1",placeholder:"1 \u041e\u0442\u0432\u0435\u0442",onChange:this.onChange}):null,c.count>=2?o.a.createElement(V.s,{name:"answer_2",placeholder:"2 \u041e\u0442\u0432\u0435\u0442",onChange:this.onChange}):null,c.count>=3?o.a.createElement(V.s,{name:"answer_3",placeholder:"3 \u041e\u0442\u0432\u0435\u0442",onChange:this.onChange}):null),o.a.createElement(V.d,{onClick:this.create_route,disabled:null==c.text||""==c.text||this.check_lenght_answer(),size:"xl"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))),o.a.createElement(V.y,{id:"edit_route"},o.a.createElement(V.B,{left:o.a.createElement(V.z,{onClick:function(){return e.setState({activePanel:"tree_story"})}})},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 routes"),o.a.createElement(V.m,null,o.a.createElement(V.n,{align:"center"},1==s.img?o.a.createElement("div",null,o.a.createElement(V.c,{src:null==s.new_img?D+s.project_id+"_"+s.id+".png":s.new_img,size:120,mode:"image"}),o.a.createElement(V.d,{mode:"destructive",style:{margin:5},onClick:function(){return e.setState({form_edit:Object(m.a)({},s,{img:0})})}},o.a.createElement(p.a,null))):null,o.a.createElement(V.l,{id:"image_editor",accept:"image/jpeg,image/png",mode:"outline",onChange:this.loadImageEditor},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e")),o.a.createElement(V.n,{top:"\u0422\u0435\u043a\u0441\u0442"},o.a.createElement(V.N,{name:"text",onChange:this.onSet,value:s.text})),o.a.createElement(V.I,{step:1,max:3,min:0,value:s.count,onChange:function(t){return e.setState({form_edit:Object(m.a)({},e.state.form_edit,{count:t})})},bottom:s.count}),o.a.createElement(V.n,{top:"\u041e\u0442\u0432\u0435\u0442\u044b"},s.count>=1?o.a.createElement(V.s,{name:"answer_1",placeholder:"1 \u041e\u0442\u0432\u0435\u0442",value:s.answer_1,onChange:this.onSet}):null,s.count>=2?o.a.createElement(V.s,{name:"answer_2",placeholder:"2 \u041e\u0442\u0432\u0435\u0442",value:s.answer_2,onChange:this.onSet}):null,s.count>=3?o.a.createElement(V.s,{name:"answer_3",placeholder:"3 \u041e\u0442\u0432\u0435\u0442",value:s.answer_3,onChange:this.onSet}):null),o.a.createElement(V.d,{onClick:this.save_edit_route,size:"xl"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))),o.a.createElement(V.O,{id:"fandom",header:!1,activePanel:"fandom"},o.a.createElement(V.y,{id:"fandom",seperator:!1},o.a.createElement(V.B,{seperator:!1,left:o.a.createElement(V.z,{onClick:function(){return e.setState({activeView:"main",page:0,q:null})}})},"\u0412\u044b\u0431\u043e\u0440 \u0444\u0430\u043d\u0434\u043e\u043c\u0430"),null==this.state.fandoms?o.a.createElement(V.K,{size:"large",style:{color:"var(--accent)",marginTop:"40%"}}):o.a.createElement(V.p,null,o.a.createElement(V.u,null,o.a.createElement(V.F,{onChange:this.onChangeSearch,name:"q"}),this.state.fandoms.data.map((function(t){return o.a.createElement(V.g,{key:t.id,onClick:function(){return e.setState({activeView:"main",q:null,page:0,form:Object(m.a)({},e.state.form,{fandom:t.name,offset_all_story:0})})},asideContent:e.state.form.fandom===t.name?o.a.createElement(E.a,{fill:"var(--accent)"}):null},t.name)}))),this.state.fandoms.more?o.a.createElement(V.k,null,o.a.createElement(V.d,{size:"xl",onClick:function(){return e.get_fandoms(1)}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435")):null))),o.a.createElement(V.O,{id:"routes",activePanel:"routes",header:!1},o.a.createElement(V.y,{id:"routes"},o.a.createElement(V.B,{left:o.a.createElement(V.z,{onClick:function(){return e.setState({activeView:"main"})}})},"rotes"),null==this.state.tree_story?o.a.createElement(V.K,{size:"large",style:{color:"var(--accent)",marginTop:"40%"}}):o.a.createElement("div",null,o.a.createElement(V.u,null,this.state.tree_story.data.map((function(t){return o.a.createElement(V.g,{before:o.a.createElement(V.c,null,t.id),onClick:function(){return e.setNext(t.id)}},t.text)}))),this.state.tree_story.more?o.a.createElement(V.k,null,o.a.createElement(V.d,{size:"xl",onClick:this.loadOffset},this.state.load?o.a.createElement(V.K,null):"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435")):null)))))}}]),a}(o.a.Component);s.a.send("VKWebAppInit"),l.a.render(o.a.createElement(L,null),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.390c45f8.chunk.js.map